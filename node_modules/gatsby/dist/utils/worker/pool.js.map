{"version":3,"sources":["../../../src/utils/worker/pool.ts"],"names":["create","process","env","GATSBY_WORKER_POOL_WORKER","worker","Worker","require","resolve","numWorkers","Math","max","forkOptions","silent"],"mappings":";;;;;;;AAAA;;AACA;;AAMO,MAAMA,MAAM,GAAG,MAAwB;AAC5CC,EAAAA,OAAO,CAACC,GAAR,CAAYC,yBAAZ,GAAyC,MAAzC;AACA,QAAMC,MAAM,GAAG,IAAIC,mBAAJ,CAAWC,OAAO,CAACC,OAAR,CAAiB,SAAjB,CAAX,EAAuC;AACpDC,IAAAA,UAAU,EAAEC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,uCAAiB,CAA7B,CADwC;AAEpDC,IAAAA,WAAW,EAAE;AACXC,MAAAA,MAAM,EAAE;AADG;AAFuC,GAAvC,CAAf;AAMA,SAAOX,OAAO,CAACC,GAAR,CAAYC,yBAAnB;AACA,SAAOC,MAAP;AACD,CAVM","sourcesContent":["import Worker from \"jest-worker\"\nimport { cpuCoreCount } from \"gatsby-core-utils\"\n\nimport type { CreateWorkerPoolType } from \"./types\"\n\nexport type GatsbyWorkerPool = CreateWorkerPoolType<typeof import(\"./child\")>\n\nexport const create = (): GatsbyWorkerPool => {\n  process.env.GATSBY_WORKER_POOL_WORKER = `true`\n  const worker = new Worker(require.resolve(`./child`), {\n    numWorkers: Math.max(1, cpuCoreCount() - 1),\n    forkOptions: {\n      silent: false,\n    },\n  }) as GatsbyWorkerPool\n  delete process.env.GATSBY_WORKER_POOL_WORKER\n  return worker\n}\n"],"file":"pool.js"}